<!DOCUMENT html>
<html>
<head>
		<script src="https://d3js.org/d3.v5.min.js"></script>
	<title></title>
    <style>
    </style>
</head>
<body>
	<span id="search">Search:</span><input type="search" id="room" required><br>
	<button id="searchBttn" onclick="pathPlot();">Search</button>
	
    <p id="demo"></p>
    
	<script>
        
//        var pathArray = ["E1", "E2","E3","P1","P2","P3","P4","P5","P6","P7","P8","P9","SE01D","SE22D","SE23D","P10",
//        "P11","P12","P13","SE24D","P14","P15","P16","P17","P18","SE03D","P19","LIFTD","P20","SE05D", "P21","P22","P23","SE12D","SE06D","P24","P25","P26","SE11D","SE09D","SE07D","P27","SE14D",
//        "P28","P29","P30","P31","SE24D","P32","P33","P34","P35","SE20D","SE21D","P36","P37","P38",
//        "P39","P40","SE19D","P41","SE18D","P42","P43","P44","SE15D","SE17D","P45","P46","SE16D","SE14D1"];
        
        var cor1 = ["E1","E2","E3","P1","P2","P3","P4","P5","P6","P7","P9","SE01D","SE22D","SE23D","P10",
                    "P11","STAIRSD"];
        
        var cor2 = ["E1","E2","E3","P1","P2","P3","P4","P5","P6","P7","P9","SE01D","SE22D","SE23D","P10",
                    "P11","STAIRSD","P13","SE24D","P14","P15","P16","P17","P18","SE03D","P19","LIFTD","P20","SE05D", "P21","P22","P23","SE12D","SE06D","P24","P25","P26","SE11D","SE09D","SE07D","P27","SE14D",
        "P28","P29","P30","P31","SE24D","P32"];
        
        var cor3 = ["E1","E2","E3","P1","P2","P3","P4","P5","P6","P7","P8","P33","P34","P35","SE20D","SE21D","P36","P37","P38",
        "P39","P40","SE19D","P41","SE18D","P42","P43","P44","SE15D","SE17D","P45","P46","SE16D","SE14D1"];
        
		function pathPlot() {
            document.getElementById("demo").innerHTML = "";
			var room = document.getElementById("room").value;
			
            if (room.length == 0) {
                alert("Please enter a room");
            } 
            
            if (room.length > 0) {
                room = room.toUpperCase();
                room+='D';
                
                if (cor1.includes(room)) {
                    find(cor1, room);
                } else if (cor2.includes(room)) {
                    find(cor2, room);
                } else if (cor3.includes(room)) {
                    find(cor3, room);        
                } else {
                    document.getElementById("demo").innerHTML = "No room found. Please check room name.";
                }       
            }
		}
        
        function find(array, room) {
            var goal = room;
            var svg = d3.xml("octgroundDUP.svg")
                    .then(data => {
                        d3.select("#demo").node().append(data.documentElement)
                        d3.selectAll("ellipse").style("fill", "none");
                        d3.select("#" + room).style("fill", "red");
                        d3.select("#E1").style("fill", "red");
                        
                        var currentNode = array[0];
                        for (var i = 0; i < array.length; i++) {
                            currentNode = array[i];
                            if (array.includes(room)) {
                                if (room != currentNode) {
                                    if ((currentNode.startsWith("E")) || (currentNode.endsWith("D"))) {
                                            continue;
                                    } else {
                                        d3.select("#"+ currentNode).style("fill", "red");
                                    } 
                                } else if (room == currentNode) {
                                    break;
                                }
                            }
                        }
            })
        }
		
		class Node {
			constructor(current, next, previous, left, right) {
				this.current = current;
				this.next = null;
				this.previous = null;
				this.left = null;
				this.right = null;
			}
		}	
	</script>
</body>
</html>